/*! */
W.define("detailBar",["detail","store","format","rootScope","$","utils","Drag","GhostBox"],function(e,t,i,a,o,l,d,s){var n;return a.isMobile||(n=d.instance(s,{el:o(".main-timecode",e.el),progressLine:o(".data-table .progress-line",e.el),played:o(".data-table .progress-line .played",e.el),box:o(".main-timecode.desktop-timecode .box",e.el),ghost:o(".ghost-timecode.desktop-timecode",e.el),ghostBox:o(".ghost-timecode.desktop-timecode .box",e.el),dataTable:e.refs.dataTable,pBar:o(".progress-bar",e.el),latestCode:null,latestGhost:null,mouseInside:!1,hasHooks:!1,displayHour:i.getHoursFunction(),zuluMode:t.get("zuluMode"),UIident:"detailBar",_init:function(){d._init.call(this),s._init.call(this),this.progressLine.addEventListener("mouseup",this.click.bind(this)),this.debouncedBcast=l.debounce(this.bcast.bind(this),100),e.on("rendered",this.render,this),e.on("close",this.removeHooks,this)},removeHooks:function(){t.off("timestamp",this.onTsChange,this),this.hasHooks=!1},addHooks:function(){t.on("timestamp",this.onTsChange,this),this.hasHooks=!0},bcast:function(){this.timestamp=this.calcTs(),t.set("timestamp",this.timestamp,{UIident:this.UIident})},calcTs:function(){return this.start+this.timecodePos/this.pxRatio},click:function(e){this.dragging||(this.addAnimation(),this.ondrag(e.pageX-20,null,e),this.removeAnimation())},onTsChange:function(e,t){t!==this.UIident&&(this.addAnimation(),this.timecodePos=(e-this.start)*this.pxRatio,this.el.style.left=this.timecodePos+this.offset+"px",this.played.style.width=this.timecodePos+"px",this.renderHour(),this.removeAnimation())},addAnimation:function(){this.pBar.classList.add("anim-allowed"),this.el.classList.add("anim-allowed")},removeAnimation:function(){window.setTimeout(function(){this.pBar.classList.remove("anim-allowed"),this.el.classList.remove("anim-allowed")}.bind(this),300)},updateGhost:function(e){var t=e.clientX,i=this.pos2offset(t-20);i&&(this.ghostBox.textContent=this.pos2hour(i),this.ghost.style.left=t+"px")},pos2offset:function(e){return(e+=20)>this.offset?Math.min(e-this.offset,this.rightLimit):null},ondrag:function(e,t,i){(e+=20)>this.offset&&(this.timecodePos=Math.min(e-this.offset,this.rightLimit),this.el.style.left=this.timecodePos+this.offset+"px",this.played.style.width=this.timecodePos+"px",this.renderHour()),this.debouncedBcast(),i.preventDefault()},renderHour:function(){if(this.zuluMode){var e=this.calcTs();this.box.dataset.zulu=i.hourUTC(e)}this.box.textContent=this.pos2hour(this.timecodePos)},pos2hour:function(e){var t=Math.round(e/this.pxWidth*this.numberOfHours%24+this.firstHour-.5*this.step);return t<0?t=24+t:t>23&&(t-=24),this.displayHour(t)},scroll:function(e){this.offset=this.dataTable.offsetLeft-e,this.el.style.left=this.timecodePos+this.offset+"px"},render:function(a){this.hasHooks||this.addHooks();var d=t.get("calendar"),s=e.renderedTable;s&&(this.step=a.step,this.displayHour=i.getHoursFunction(),this.zuluMode=t.get("zuluMode"),this.start=s.start-.5*this.step*l.tsHour,this.firstHour=s.data.hour[0],this.pxRatio=s.pxWidth/s.tsWidth,this.pxWidth=s.pxWidth,this.rightLimit=Math.min(s.pxWidth,(d.end-this.start)*this.pxRatio),this.offset=this.dataTable.offsetLeft-this.dataTable.scrollLeft,this.progressLine.style.width=this.rightLimit+"px",this.timecodePos=Math.min(s.pxWidth,(t.get("timestamp")-this.start)*this.pxRatio),this.el.style.left=this.timecodePos+this.offset+"px",this.played.style.width=this.timecodePos+"px",this.numberOfHours=s.hours*this.step,delete this.box.dataset.zulu,this.renderHour(),o(".progress-line i",e.el).style.left=s.nowPosition+"px")}})),n}),
/*! */
W.define("detailLoader",["detail","http","utils","weatherRenderExtended","dataManipulators","trans","plugins","multiLoad"],function(e,t,i,a,o,l,d,s){var n,r=e.refs.legend,c=e.refs.loader,p=e.refs.dataTable,m=function(){p.classList.add("disabled"),c.classList.add("show")},h=function(){p.classList.remove("disabled"),c.classList.remove("show")},b=function(t){h(),e.emit("rendered",t)};function f(t,i){t.step=i.header&&i.header.step||3;var o=a.init(e.el,i,t).renderTable().renderBackground().renderAboutLocation(i);l.translateDocument(e.el),t.height=o.getHeight(),e.loadedData=i,e.renderedTable=o}return{load:function(e){var l=i.getFcstUrl(e.model,e,"detail");t.get(l).then(function(e,l){var n=l.data;n||window.wError("detailLoader","Recieved no data"),f(e,n),/meteogram|airgram/.test(e.display)?t.get("/forecast/meteogram/"+e.model+"/"+e.lat+"/"+e.lon).then(function(e,t,i){var l=i.data;if(e===a.syncCounter&&l){var s=o.trimRhData(a.data.origTs,l);switch(t.display){case"airgram":d.airgram.load().then(function(){W.require("airgram"),a.renderAirgram(s),b(t)}),a.renderMeteogram(s);break;case"meteogram":a.renderMeteogram(s),b(t)}}}.bind(null,a.syncCounter,e)).catch(function(e){h(),window.wError("detail","Meteogram, Airgram render fail",e)}):"wind"===e.display?s(e,e.models).then(function(e,t,o){if(e===a.syncCounter){var l=o.filter(function(e){var i=e.model;return i===t.model})[0].fcst,d=l.data,s=["hour",t.model+"/windCombined"],n=[],r=1/0;o.forEach(function(e){var i=e.model,a=e.fcst,o=a.data,l=o.wind,c=o.windDir,p=o.gust;d[i+"/wind"]=l.slice(),d[i+"/windDir"]=c.slice(),d[i+"/gust"]=p.slice(),t.model!==i&&s.push(i+"/windCombined"),n.push(i),r=Math.min(r,l.length)}),i.each(d,function(e){return e.length=r}),t.rows=s,t.models=n,f(t,l),b(t)}}.bind(null,a.syncCounter,e)).catch(window.wError.bind(null,"windDisplay","Loading/rendering models")):b(e)}.bind(null,e)).catch(function(e){window.wError("detail","Detail render fail",e),h()}),e.display!==n&&(r.innerHTML=a.renderLegend(e),n=e.display),m()}}}),
/*! */
W.define("detailScrollerDesktop",["detailTitles","detail","detailBar","Scrollable","DraggableDiv","rootScope"],function(e,t,i,a,o,l){var d;return l.isMobile||(d=a.instance(o,{scrollEl:t.refs.dataTable,_init:function(){a._init.call(this),o._init.call(this),t.on("rendered",this.init,this),t.on("close",this.resetScroll,this)},onscroll:function(t){var a=t.target.scrollLeft;a<0||(i.scroll(a),e.scroll(a),this.scrollTicking=!1)},init:function(){this.scrollTicking=!1,clearTimeout(this.scrollEndTimer)},resetScroll:function(){this.scrollEl.scrollLeft=0}})),d}),
/*! */
W.define("detailScrollerMobile",["detailTitles","detailSlider","store","$","detail","rootScope","Scrollable"],function(e,t,i,a,o,l,d){var s;return l.isMobile&&(s=d.instance({detailEl:o.el,scrollEl:o.refs.dataTable,wasScrolled:!1,legendHidden:!1,lastScroll:0,onMapEl:a(".detail-onmap",o.el),tdWidth:o.tdWidth,_init:function(){d._init.call(this),o.on("rendered",this.init,this),o.on("swiperight",this.onswiperight,this),o.on("close",this.resetScroll,this),o.on("clickColumn",this.clickColumn,this),o.on("scrollTo",this.scrollTo,this)},onscroll:function(i){var a=i.target.scrollLeft;a<0||(this.lastScroll=a,t.scroll(a),this.wasScrolled||(this.detailEl.classList.add("scrolled"),this.wasScrolled=!0,setTimeout(t.resize.bind(t),200)),e.scroll(a),this.scrollTicking=!1)},clickColumn:function(e){this.scrollTicking||(this.syncColumn(+e),this.bcastChange())},bcastChange:function(){i.set("timestamp",+this.columns[this.selectedColumn].dataset.ts)},syncMiddle:function(e){var t=Math.min(this.maxIndex,Math.floor((e+this.halfScreen-30)/this.tdWidth));this.syncColumn(t)},syncColumn:function(e){e!==this.selectedColumn&&(this.onMapEl.style.left=e*this.tdWidth+"px",this.selectedColumn=e)},onscrollend:function(){this.scrollTicking=!1,this.syncMiddle(this.scrollEl.scrollLeft),this.bcastChange()},init:function(){this.legendHidden=!1,this.scrollTicking=!1,clearTimeout(this.scrollEndTimer),this.initMiddleFrame(o.renderedTable)},resetScroll:function(){this.lastScroll=0,this.scrollEl.scrollLeft=0},initMiddleFrame:function(e){var t=e.data.origTs,o=i.get("calendar"),l=o&&o.end,d=i.get("timestamp");this.columns=a("#detail .data-table tr.td-hour").querySelectorAll("[data-ts]"),this.halfScreen=window.screen.width/2,this.maxIndex=this.columns.length-1,this.selectedColumn=0;for(var s=0;s<t.length-1;s++){if(d>=t[s]&&d<t[s+1]){this.onMapEl.style.left=(s+1)*this.tdWidth+"px",this.syncColumn(s+1);break}if(t[s]>=l){this.maxIndex=s;break}}},onswiperight:function(e){var i=this;this.lastScroll<=0&&e<-50&&this.wasScrolled&&(this.detailEl.classList.remove("scrolled"),setTimeout(t.resize.bind(t),300),setTimeout(function(){i.wasScrolled=!1},1e3))}})),s}),
/*! */
W.define("detailSlider",["detail","weatherRender","rootScope","$","utils","Drag"],function(e,t,i,a,o,l){var d;return i.isMobile&&(d=l.instance({el:a(".handle",e.el),sliderWrapperEl:a(".slider-wrapper",e.el),wrapper:a(".slider-wrapper",e.el),slEl:a(".slider",e.el),tableEl:e.refs.dataTableTable,dataTable:e.refs.dataTable,_init:function(){l._init.call(this),e.on("rendered",this.render,this),window.addEventListener("resize",this.resize.bind(this)),this.wrapper.onclick=this.click.bind(this)},click:function(t){var i=this.el.offsetWidth,a=this.wrapper.offsetWidth+5,l=o.bound(t.clientX-i/2,0,a-i),d=(this.tableEl.offsetWidth-this.dataTable.offsetWidth)*l/(a-i);t.preventDefault(),t.stopPropagation(),e.emit("scrollTo",d)},ondrag:function(e,t,i){var a=this.slEl.offsetWidth,l=this.el.offsetWidth,d=this.tableEl.offsetWidth,s=this.dataTable.offsetWidth,n=o.bound(e,0,a-l);this.el.style.left=n+"px",this.dataTable.scrollLeft=(d-s)*n/(a-l)},render:function(i){e.el.dataset.icons=i.days>6?"small":"big",t.renderFragment(this.sliderWrapperEl,null,{iconSize:27,timestamps:i.timestamps,bgHeight:55}),this.resize()},scroll:function(e){this.el.style.left=Math.min(e*this.leftCoeficient,this.leftLimit)+"px"},resize:function(){this.el.style.width=Math.floor(100*this.dataTable.offsetWidth/this.tableEl.offsetWidth)+"%",this.leftCoeficient=this.slEl.offsetWidth/this.tableEl.offsetWidth,this.leftLimit=this.slEl.offsetWidth-this.el.offsetWidth,this.scroll(this.dataTable.scrollLeft)}})),d}),
/*! */
W.define("detailTitles",["detail"],function(e){var t=[],i=e.refs.dataTable,a=10,o=e.refs.legend;e.on("rendered",n);var l=function(e){o.dataset.title=" ",e.style.visibility="visible",e.style.position="static",e.style.float="left",e.style.opacity=1},d=function(e){o.dataset.title=" ",e.style.visibility="visible",e.style.position="static",e.style.float="right",e.style.opacity=.3},s=function(e){e.el.style.visibility="hidden",o.dataset.title=e.content};function n(){t=[];for(var e=i.querySelectorAll(".sticky-title"),o=i.getBoundingClientRect().left,l=i.scrollLeft,d=0;d<e.length;d++){var s=e[d],n=s.parentElement.getBoundingClientRect(),c=s.clientWidth;c>50&&t.push({el:s,width:c,content:s.textContent,left:n.left-o+a+l,right:n.right-o-a+l,status:0})}l>0&&r(l)}function r(e){for(var i=t.length,a=0;a<i;a++){var o=t[a];o.left>e?0!==o.status&&(o.status=0,l(o.el)):o.right-e<o.width?2!==o.status&&(o.status=2,d(o.el)):1!==o.status&&(o.status=1,s(o))}}return{init:n,scroll:r}}),
/*! */
W.define("detailUtils",["http","trans","detail","store","rootScope","map","reverseName","query","$","broadcast","utils","products","location","models"],function(e,t,i,a,o,l,d,s,n,r,c,p,m,h){var b={},f=null,u=n("#search");i.on("rendered",function(e){setTimeout(b.postRenderTasks.bind(null,e,i.loadedData,i.renderedTable),200)});var v={table:["hour","icon","temp","rain","wind","gust","windDir"],wind:["hour","windCombined"],meteogram:["hour","icon","tempCombined","windCombined","pressure","rainClouds"],airgram:["hour","airTemp","hour","rainClouds"]},g=["hour","windCombined","waves","swell1","swell1Period"];b.model2rows={ecmwf:Object.assign(c.clone(v),{meteogram:["hour","icon","tempCombined","windCombined","pressure","rainClouds","cbase"]}),ecmwfWaves:{waves:g},iconEu:v,gfs:v,gfsWaves:{waves:g},namConus:v,namAlaska:v,namHawaii:v,mblue:{table:v.table,wind:v.wind},arome:{table:v.table,wind:v.wind}},a.defineProperty("detailDisplay","syncSet",function(e){var t=a.get("detailProduct");return"waves"===e?(t=a.get("prefferedProduct")+"Waves",a.set("detailProduct",t)):/\S+Waves/.test(t)?(t=t.replace(/Waves/,""),a.set("detailProduct",t)):e in b.model2rows[t]||a.set("detailProduct","ecmwf"),e}),a.defineProperty("detailLocation","syncSet",function(e){var t=["ecmwf","gfs","mblue","ecmwfWaves","gfsWaves"].concat(h.betterProducts(e,"onlyPointProducts"));return a.set("detailAvailProducts",t),t.includes(a.get("detailProduct"))||a.set("detailProduct","ecmwf"),e}),b.modelFromMap=function(e){var t=p[a.get("product")];return t.ident in b.model2rows&&t.pointIsInBounds.call(t,e)?t.ident:null},b.productToMap=function(e,t){t=h.getProduct(a.get("overlay"),t),a.get("product")!==t&&(o.globalProducts.includes(t)||h.betterProducts(e).includes(t)?a.set("product",t):console.warn("Model product combination is not in sync"))},b.isValid=function(e,t){return e in b.model2rows&&t in b.model2rows[e]},b.getRows=function(e,t){return b.isValid(e,t)?b.model2rows[e][t].slice():b.model2rows.ecmwf.table.slice()},b.postRenderTasks=function(a,l){var d=l.header;l.data;if(o.isMobile){var s=p[a.model];s&&(i.refs.model.textContent=s.modelName)}"waves"===a.display?(r.emit("rqstClose","wind"),d.hasWaves?r.emit("rqstOpen","waves",a):console.warn("Wave forecast missing for this spot")):"wind"===a.display?(r.emit("rqstOpen","wind",a),r.emit("rqstClose","waves")):(r.emit("rqstClose","waves"),r.emit("rqstClose","wind")),"externalOpen"===a.emitter&&b.zoomPanMap(a),+d.daysAvail>7&&!a.extended?(i.el.dataset.extended=null,i.refs.extended.innerHTML=c.template(t.D_FORECAST_FOR,{duration:+d.daysAvail-1})):i.el.dataset.extended="extended","poi-icon"===a.source&&/pgspots|surfspots/.test(a.poiType)&&e.get("/pois/"+a.poiType+"/"+a.id).then(function(e){var t=e.data,i=n("#detail .model-info");i&&t.partnerLink&&(i.innerHTML="Detail of "+("pgspots"==a.poiType?"paragliding":"surfing")+' spot on: <a data-do="url,'+t.partnerLink+'"\n\t\t\t\t\tstyle="color: #9D0300;">'+(t.partnerLinkText||t.partnerLink.replace(/^.*(www\.|\/\/)([^\/]+).*$/,"$2"))+"</a>")}),r.emit("detailRendered"),r.emit("log","detail2/model/"+a.model),r.emit("log","detail2/display/"+a.display)};var w=function(e){m.title(e+" "+t.WFORECAST),m.description(e+" "+t.WFORECAST+". Meteogram, airgram, wind, clouds, temperature, humidity and dew point forecast. ECMWF, WRF, GFS, NAM, NEMS and other forecast models."),s.set(e),f&&clearTimeout(f),f=setTimeout(function(){return u.style.transform=""},2e3)};return b.changeUrl=function(e){o.isMobile||(u.style.transform="scale(1.1) translate(20px,0px)"),e.name||"embed2"===o.target?w(e.name):(s.showLoader(),d.get(e,14).then(function(t){var i=t.name;s.hideLoader(),w(i),e.name=i}).catch(s.hideLoader.bind(s)))},b.zoomPanMap=function(e){var t=e.lat,a=e.lon,d=e.source,s=i.el.offsetHeight,n=o.map.zoom;if(o.isMobile){r.emit("rqstClose","picker");var c=Math.max(6,n),p=l.project({lat:t,lon:a},c);p.y+=.5*(s-40);var m=l.unproject(p,c);l.center({lat:m.lat,lon:m.lng,zoom:c},!0)}else if(/-icon|picker|label/.test(d))l.ensurePointVisibleY(t,a,s+40);else{var h=/search|url/.test(d)?8:0,b=Math.max(h,n);l.center({lat:t,lon:a,zoom:b,paddingTop:-s},!1),r.emit("rqstOpen","picker",{lat:t,lon:a,source:"detail",noEmit:!0})}},b}),
/*! */
W.tag("detail",'<div class="timecode ghost-timecode noselect desktop-timecode" style="opacity:0;"><div class="box"></div></div><div class="timecode main-timecode noselect desktop-timecode"><div class="box"></div><div class="loading ld-lgray size-l loader-path"></div></div><div class="slider-wrapper"><canvas></canvas><table></table><div class="slider"><div class="handle grab"></div></div><div class="alerts-line" style="display: none;"></div><div class="slider-rain" style="display: none;"></div></div><div class="table-wrapper show noselect notap"><div class="legend" data-ref="legend"></div><div class="data-table noselect flex-container" data-ref="dataTable"><div class="forecast-table progress-bar"><canvas></canvas><div class="progress-line"><div class="played"></div><div class="avbl"></div><i></i></div><table id="detail-data-table" class="grab" data-ref="dataTableTable"></table><b></b><span class="detail-onmap"><div class="loading size-l loader-path"></div></span><div data-do="extended" class="fg-gray size-xs inlined clickable" data-icon-after="g" data-ref="extended"></div></div><div class="services detail-content-box"><div class="sticky-title" data-t="D_ABOUT_LOC2"></div><ul class="services-container content-container"></ul><div id="detail-alert-promo" data-do="newAlert"><div class="button size-m" data-icon="&#xe027;" data-do="openAlert" data-t="ALERTS_LINK_SHORT"></div><div class="fg-gray size-s disabled"> Set up Windy Alert for this location and never miss your desired conditions. </div></div></div></div><div class="loading size-ultra full show" data-ref="loader"></div></div><div id="detail-box"><div class="dbitem transparent-switch compact size-s display-as" data-ref="mobileMenuSwitch"><div data-do="set,table" class="inlined" data-icon="&" data-t="ND_DISPLAY_BASIC"></div><div data-do="set,wind" class="inlined" data-icon="&#xe002;" data-t="WIND"></div><div data-do="set,meteogram" class="inlined" data-icon="&#xe015;">Meteogram</div><div data-do="set,airgram" class="inlined" data-icon="&#xe009;">Airgram</div><div data-do="set,waves" class="inlined" data-icon="{" data-t="WAVES"></div><div data-do="more" class="inlined" data-icon="&#xe024;"><b data-t="MORE"></b><b data-t="LESS"></b></div></div><div class="dbitem transparent-switch compact size-s display-model" data-ref="productSwitch"></div><span class="dbitem model-info mobilehide"></span></div><div class="webcams-circle animation clickable" data-ref="webcams"><div class="circle boxshadow"></div><span data-t="D_WEBCAMS" class="animation uiyellow show"></span></div><div class="stations-circle animation clickable" data-ref="stations"><div class="circle boxshadow size-l"><small></small></div><span data-t="D_STATIONS" class="animation uiyellow show"></span></div><div id="detail-model-text" class="uiyellow" data-ref="model"></div>','#detail-box{color:#7a7a7a;font-size:10px;position:absolute;display:block;left:10px;bottom:9px;top:inherit;right:inherit;white-space:nowrap;z-index:50}#detail-box .dbitem{display:inline-block;white-space:nowrap;position:relative}#detail-box .model-info{margin-left:15px;top:-5px}#detail-box .model-info span{opacity:.6}#detail-box .display-model{margin-left:30px}#detail-box .display-model .seaitem{display:none}#detail-box .display-model [data-do="set,arome"],#detail-box .display-model [data-do="set,mblue"]{opacity:.6;pointer-events:none}[data-display="table"] #detail-box .display-model [data-do="set,arome"],[data-display="table"] #detail-box .display-model [data-do="set,mblue"]{opacity:1;pointer-events:all}[data-display="waves"] #detail-box .display-model .seaitem{display:table-cell}[data-display="waves"] #detail-box .display-model .landitem{display:none}#detail-box .display-as [data-do="set,waves"]{opacity:.6;pointer-events:none}[data-position="sea"] #detail-box .display-as [data-do="set,waves"]{opacity:1;pointer-events:all}#device-tablet #detail-box .transparent-switch,#device-desktop #detail-box .transparent-switch{color:inherit}#device-tablet #detail-box .transparent-switch div,#device-desktop #detail-box .transparent-switch div{border-radius:1.6em}#device-tablet #detail-box .transparent-switch div::before,#device-desktop #detail-box .transparent-switch div::before{color:#9D0300}#device-tablet #detail-box .transparent-switch .selected,#device-desktop #detail-box .transparent-switch .selected{background-color:#9D0300;color:white}#device-tablet #detail-box .transparent-switch .selected::before,#device-desktop #detail-box .transparent-switch .selected::before{color:white}#device-tablet #detail-box .display-as b,#device-desktop #detail-box .display-as b,#device-tablet #detail-box .display-as [data-do="more"],#device-desktop #detail-box .display-as [data-do="more"]{display:none}#device-mobile #detail-box{background-color:#9D0300;position:absolute;left:0;right:0;bottom:-35px;width:100%;height:85px;border-top:solid #e5e5e5 5px;transition:all .3s}#device-mobile #detail-box .display-model{color:white;font-size:12px;position:absolute;display:block;bottom:8px;margin-left:10px;width:100%;text-align:center;background:none;overflow:auto;padding-bottom:20px;margin-bottom:-20px}#device-mobile #detail-box .display-model div{padding:.2em .8em}#device-mobile #detail-box .display-model .selected{background:#c38281}#device-mobile #detail-box .display-model [data-do="rqstOpen,multimodel"]::before{position:relative;font-size:1.2em;top:.28em;padding-right:.35em}#device-mobile #detail-box .display-as{margin-left:45px;display:block;height:45px;font-size:8px}#device-mobile #detail-box .display-as div{width:16.666%;color:white;text-align:center;display:inline-block;height:45px;position:relative;letter-spacing:.15em;overflow:hidden;padding-top:30px}#device-mobile #detail-box .display-as div::before{position:absolute;left:50%;margin-left:-0.5em;top:50%;display:block;font-size:18px;margin-top:-14px}#device-mobile #detail-box .display-as div.selected{text-decoration:underline;background:none}#device-mobile #detail-box .display-as div[data-do="more"]::before{font-size:30px;margin-top:-20px}#device-mobile #detail-box .display-as div b{font-weight:normal}#device-mobile #detail-box [data-t="LESS"]{display:none}#device-mobile .display-more #detail-box{bottom:0}#device-mobile .display-more #detail-box [data-t="LESS"]{display:block}#device-mobile .display-more #detail-box [data-t="MORE"]{display:none}.ondetail #rh-bottom,.ondetail #weather,.ondetail #share,.ondetail #mobile-menu,.ondetail #bottom,.ondetail #poismodel{display:none}.ondetail #rhpane{margin-bottom:10px;margin-top:10px}.ondetail #rhpane #ovr-menu{display:none}.ondetail #rhpane #overlay{margin-bottom:15px}.ondetail .picker .picker-content span{padding-right:20px}.ondetail .picker .picker-content .picker-share,.ondetail .picker .picker-content .picker-link{display:none}#device-mobile .ondetail #logo,#device-mobile .ondetail #user{display:none !important}@media screen and (max-height:400px){.ondetail #search{display:none}}.onwebcam #detail{transition:opacity 2s;opacity:0}#detail{pointer-events:auto;width:100vw;position:relative;z-index:10;transition:margin-bottom .3s ease-in-out;-webkit-transition:margin-bottom .3s ease-in-out;margin-bottom:-110%;font-size:12px;color:#222;box-shadow:content-box}#detail a{color:inherit}#detail a:hover{opacity:initial}#detail.open{margin-bottom:0}#detail>.closing-x{display:block}#device-tablet #detail>.closing-x,#device-desktop #detail>.closing-x{font-size:40px;top:-0.7em;left:.1em;right:initial}#detail .table-wrapper{white-space:nowrap;position:relative;overflow:hidden}#detail .table-wrapper .progress-line{border:none;border-bottom:10px solid transparent;margin-bottom:-10px;top:0}#detail .timecode{font-size:13px}#detail .timecode.anim-allowed{-webkit-transition:all ease-in-out .25s;transition:all ease-in-out .25s}#detail .legend::after{color:#565656;white-space:nowrap;font-size:14px;content:attr(data-title);display:block;position:absolute;top:5px;left:100%}#detail .forecast-table{display:inline-block}#detail .forecast-table .detail-onmap{display:none}#detail .forecast-table [data-do="extended"]{position:absolute;right:18px;top:20px;transform:rotate(-90deg);transform-origin:right;z-index:50;opacity:.7;border-top:solid 10px transparent}#device-desktop #detail .forecast-table [data-do="extended"]{top:25px}#detail .forecast-table::after{position:absolute;right:0;top:0;display:block;height:100%;width:70px;margin-top:20px;overflow:hidden;z-index:45;content:\'\';background:linear-gradient(to right, rgba(255,255,255,0), rgba(248,248,248,0.9) 75%, rgba(248,248,248,0.9))}#detail[data-display="wind"] .forecast-table [data-do="extended"],#detail[data-extended="extended"] .forecast-table [data-do="extended"],#detail[data-display="wind"] .forecast-table::after,#detail[data-extended="extended"] .forecast-table::after{display:none}#detail .data-table{transition:.3s opacity 0s;-webkit-transition:.3s opacity 0s;overflow-y:hidden;overflow-x:scroll;-webkit-overflow-scrolling:touch;-webkit-flex-direction:row;-moz-flex-direction:row;flex-direction:row;box-sizing:content-box;position:relative}#detail .data-table::-webkit-scrollbar{display:none}#detail .data-table .td-windCombined.d-display-meteogram td{border-top:1px solid #e5e5e5;border-bottom:1px solid #e5e5e5}#detail .data-table .d-display-airgram .day-end{border-color:rgba(208,208,208,0.25)}#detail .data-table .td-hour.d-display-airgram td{color:#fdffaf;font-weight:bold;text-shadow:0 0 1px black}#detail .data-table .td-hour td.triggered{background-color:rgba(157,3,0,0.64);color:white;font-weight:bold;padding-top:2px}#detail #detail-model-text{position:absolute;right:5px;top:-15px;font-size:11px;pointer-events:none}#detail .detail-content-box{display:inline-block;white-space:nowrap;position:relative;top:8px;padding:7px 10px}#detail .content-container{clear:both;white-space:nowrap;position:absolute;top:28px;left:0}#detail .weather-icon{opacity:.6}#detail .weather-icon span{border:10px solid transparent;background-clip:padding-box;margin-left:-10px;margin-top:-10px;white-space:nowrap;color:white;font-size:10px;line-height:1.5;padding:1px 5px 1px 3px}#detail .weather-icon span div{pointer-events:none;display:inline-block;font-size:9px;margin-right:3px;position:relative;top:1px}#detail .weather-icon.weather-icon-noamin{animation:none;-webkit-animation:none}#device-tablet #detail::before,#device-desktop #detail::before{content:\' \';background-color:#f8f8f8;width:100%;height:100%;position:absolute;top:8px}#device-tablet #detail .legend,#device-desktop #detail .legend{padding-bottom:1px;margin-top:8px}#device-tablet #detail .data-table,#device-desktop #detail .data-table{padding-bottom:66px;margin-bottom:-20px}#device-tablet #detail .data-table table,#device-desktop #detail .data-table table{top:2px}#device-tablet #detail .forecast-table canvas,#device-desktop #detail .forecast-table canvas{top:36px}#device-mobile #detail,#device-tablet #detail{-webkit-tap-highlight-color:rgba(0,0,0,0);position:fixed;left:0;right:0}#device-mobile #detail{background-color:rgba(68,65,65,0.84)}#device-mobile #detail .progress-line,#device-mobile #detail .desktop-timecode{display:none}#device-mobile #detail .table-wrapper{background-color:#f8f8f8}#device-mobile #detail .slider-wrapper{display:block;padding:7px 5px}#device-mobile #detail .slider-wrapper canvas{top:10px}#device-mobile #detail[data-icons="small"] .slider-wrapper table td img{width:12px}#device-mobile #detail>.closing-x{transition:bottom .3s}#device-mobile #detail.display-more>.closing-x{bottom:38px}#device-mobile #detail .sticky-title{text-transform:uppercase;font-size:12px}#device-mobile #detail .detail-content-box{padding-top:8px;top:0}#device-mobile #detail .content-container{top:28px}#device-mobile #detail .legend .legend-right{width:30px;font-size:10px}#device-mobile #detail .legend .legend-left{padding-left:0;font-size:10px}#device-mobile #detail .legend::after{text-transform:uppercase;font-size:12px;top:7px}#device-mobile #detail .data-table{font-size:13px;transition:padding .3s;padding-bottom:50px;margin-bottom:0}#device-mobile #detail .data-table .forecast-table b{top:28px}#device-mobile #detail .data-table .forecast-table td{width:34px}#device-mobile #detail .data-table .forecast-table .td-days td{width:inherit}#device-mobile #detail .data-table .forecast-table .detail-onmap{pointer-events:none;position:absolute;display:block;top:28px;width:34px;bottom:0;border:#9D0300 1px solid;border-radius:5px;z-index:10;opacity:.2}#device-mobile #detail .data-table .forecast-table .detail-onmap .loading{position:absolute;top:-22px;left:10px}#device-mobile #detail.display-more .data-table{padding-bottom:85px}#device-mobile #detail[data-display="meteogram"] .slider-wrapper canvas,#device-mobile #detail[data-display="wind"] .slider-wrapper canvas,#device-mobile #detail[data-display="waves"] .slider-wrapper canvas,#device-mobile #detail[data-display="airgram"] .slider-wrapper canvas,#device-mobile #detail[data-display="meteogram"] .slider-wrapper table td img,#device-mobile #detail[data-display="wind"] .slider-wrapper table td img,#device-mobile #detail[data-display="waves"] .slider-wrapper table td img,#device-mobile #detail[data-display="airgram"] .slider-wrapper table td img,#device-mobile #detail[data-display="meteogram"] .slider-wrapper table td big,#device-mobile #detail[data-display="wind"] .slider-wrapper table td big,#device-mobile #detail[data-display="waves"] .slider-wrapper table td big,#device-mobile #detail[data-display="airgram"] .slider-wrapper table td big{display:none}#device-mobile #detail[data-display="meteogram"] .slider-wrapper table td,#device-mobile #detail[data-display="wind"] .slider-wrapper table td,#device-mobile #detail[data-display="waves"] .slider-wrapper table td,#device-mobile #detail[data-display="airgram"] .slider-wrapper table td{font-size:14px;padding-bottom:4px}#detail.scrolled:not([data-display="wind"]) .legend{margin-left:-70px}#detail[data-display="wind"].scrolled .legend [data-do="metric,hour"]{display:none}#detail[data-display="wind"].scrolled .legend .legend-right{position:absolute;right:0;top:15px}#detail .services .content-container{padding-right:500px}#detail .services #detail-alert-promo{position:absolute;left:100%;width:250px;height:calc(100% - 25px);white-space:normal;text-align:center;padding-top:40px;margin-left:10px}#detail .services #detail-alert-promo .button{margin-bottom:15px}',"",function(e){var t=W.require,i=this.node,a=t("detail"),o=t("rootScope");a.el=i,a.refs=this.refs,a.tdWidth=o.isMobile?34:30;var l=t("utils"),d=t("store"),s=t("broadcast"),n=t("query"),r=t("map"),c=t("location"),p=t("favs"),m=t("metrics"),h=t("picker"),b=t("detailLoader"),f=t("products"),u=t("models"),v=t("BindedSwitch"),g=t("ClickHandler"),w=t("Swipe"),x=t("singleclick"),y=t("detailUtils"),k=t("nearest");t("weatherRenderExtended"),t("detailUtils"),t("detailLoader"),t("detailTitles"),t("detailSlider"),t("detailScrollerMobile"),t("detailScrollerDesktop"),t("detailBar");var T=!1,C=null,S=null,M=l.debounce(function(){var e=d.get("detailDisplay"),t=d.get("detailProduct"),i=d.get("detailLocation"),o=y.getRows(t,e),l=d.get("detailExtended");o||console.error("Bad combination");if("wind"===(i=Object.assign(i,{display:e,model:t,rows:o,tdWidth:a.tdWidth,iconSize:25,days:l?12:6,extended:l})).display){i.days=5,i.tempBgH=83,i.models=u.getPointProducts(i);for(var s=0;s<i.models.length-1;s++)i.rows.push("windCombinedEmpty")}b.load(i),c.url(i.lat+"/"+i.lon+("table"!==i.display?"/"+i.display:""))},100);function E(){C&&(r.removeLayer(C),C=null),S&&(S.classList.remove("selected"),S=null)}function z(e){h[e]("pickerOpened",P),h[e]("pickerMoved",P),s[e]("metricChanged",M),d[e]("detailDisplay",M),d[e]("detailProduct",M),d[e]("detailExtended",M),x[e]("detail",P),T="on"===e}function P(e){e.lat=l.normalizeLatLon(e.lat),e.lon=l.normalizeLatLon(e.lon),e.timestamps=p.hasTimestamps(e.alertId||e),d.set("detailLocation",e),M(),y.changeUrl(e)}a.on("rendered",function(e){y.productToMap(e,e.model),E(),e.sourceEl&&e.sourceEl.classList&&(S=e.sourceEl,e.sourceEl.classList.add("selected"));C=L.marker([e.lat,e.lon],{icon:r.myMarkers.pulsatingIcon}).addTo(r),i.dataset.model=e.model,i.dataset.display=e.display,i.dataset.position=a.loadedData.celestial.atSea<1?"sea":"land",D.load(e),H.load(e)}),this.onclose=function(){a.emit("close"),H.close(),D.close(),c.reset(),n.set(""),s.emit("rqstClose","multimodel"),s.emit("rqstClose","waves"),s.emit("rqstClose","wind"),s.emit("rqstClose","lookr"),s.emit("rqstClose","webcam"),s.emit("rqstClose","detail-webcams"),E(),T&&z("off")},this.onopen=function(e){if(d.set("detailExtended",!1),!T){var t;"embed2"!==o.target&&(t=y.modelFromMap(e))&&(/Waves/.test(t)&&d.set("detailDisplay","waves"),d.set("detailProduct",t)),"url"===e.source&&e.display&&d.set("detailDisplay",e.display);var i=t||d.get("detailProduct"),l=d.get("detailDisplay");y.isValid(i,l)||d.set("detailDisplay","table"),z("on"),setTimeout(s.emit.bind(s,"log","detail2/source/"+(e.source||"")),2e3),a.emit("open")}e.emitter="externalOpen",P(e)};var D=k.stations({el:this.refs.stations});i.dataset.webcams="empty";var H=k.webcams({el:this.refs.webcams});v.instance({el:a.refs.mobileMenuSwitch,bindStore:"detailDisplay",more:function(){i.classList.toggle("display-more")}}),v.instance({el:a.refs.productSwitch,bindStore:"detailProduct",_init:function(){v._init.call(this),d.on("detailAvailProducts",this.redraw,this),this.redraw()},redraw:function(){var e=d.get("detailAvailProducts"),t=d.get("detailProduct"),i=e.map(function(e){var t=f[e],i=t.modelName,a=t.modelResolution;return'<div data-do="set,'+e+'" '+(a?'data-tooltip="'+a+'km"':"")+'\n\t\t\t\t\t\t\tclass="'+(/Waves/.test(e)?"seaitem":"landitem")+' tooltip-up">'+i+"</div>"}).join("");this.el.innerHTML=i+'<div data-do="rqstOpen,multimodel" class="inlined" data-icon="&#xe00f;" data-t="COMPARE"></div>',this.set(t)}}),g.instance({el:this.node,stopPropagation:!0,click:function(e,t){switch(e){case"metric":m[t]&&m[t].cycleMetric();break;case"index":a.emit("clickColumn",t);break;case"extended":d.set("detailExtended",!0);break;case"openAlert":s.emit("rqstOpen","alerts",d.get("detailLocation"))}}}),w.instance({el:this.node,_swipeTresholdY:30,onswipe:function(e,t){"right"===e?a.emit("swiperight",t):"up"===e?s.emit("rqstOpen","webcam",d.get("detailLocation")):"down"===e&&s.emit("rqstClose","detail")}})});